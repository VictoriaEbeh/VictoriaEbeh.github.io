<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Victoria Ebeh - GISC 6325 - End of term Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Victoria Ebeh</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About Victoria</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./school.html"> 
<span class="menu-text">School</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#study-area" id="toc-study-area" class="nav-link" data-scroll-target="#study-area">Study Area</a></li>
  </ul></li>
  <li><a href="#aim-objectives" id="toc-aim-objectives" class="nav-link" data-scroll-target="#aim-objectives">Aim &amp; Objectives</a></li>
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology">Methodology</a>
  <ul class="collapse">
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a></li>
  </ul></li>
  <li><a href="#resultsdiscussion" id="toc-resultsdiscussion" class="nav-link" data-scroll-target="#resultsdiscussion">Results/Discussion</a>
  <ul class="collapse">
  <li><a href="#change-detection-interpretations" id="toc-change-detection-interpretations" class="nav-link" data-scroll-target="#change-detection-interpretations">Change Detection Interpretations</a></li>
  <li><a href="#population-and-urban-density" id="toc-population-and-urban-density" class="nav-link" data-scroll-target="#population-and-urban-density">Population and Urban Density</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a>
  <ul class="collapse">
  <li><a href="#full-report-on-mapping-urban-sprawl-analyzing-the-dynamics-of-land-useland-cover-change-and-its-impact-on-urban-growth-patterns." id="toc-full-report-on-mapping-urban-sprawl-analyzing-the-dynamics-of-land-useland-cover-change-and-its-impact-on-urban-growth-patterns." class="nav-link" data-scroll-target="#full-report-on-mapping-urban-sprawl-analyzing-the-dynamics-of-land-useland-cover-change-and-its-impact-on-urban-growth-patterns.">Full Report on <strong>“Mapping Urban Sprawl: Analyzing the Dynamics of Land Use/Land Cover Change and its Impact on Urban Growth Patterns.”</strong></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">GISC 6325 - End of term Project</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>My end-of-term project on <strong>“Mapping Urban Sprawl: Analyzing the Dynamics of Land Use/Land Cover Change and its Impact on Urban Growth Patterns.”</strong> was an interesting study for me.</p>
<p>Urban sprawl is a major issue for many cities, causing significant changes in land use and land cover (LULC). My project aims to explore these changes and their effects on urban growth. By mapping and studying LULC variations, we can understand how cities expand and change over time.</p>
<section id="study-area" class="level3">
<h3 class="anchored" data-anchor-id="study-area">Study Area</h3>
<p><img src="images/Screenshot 2023-11-19 140235.png" class="img-fluid"></p>
<ul>
<li><p>Dallas, located in North Texas within the Southern United States, serves as the county seat of Dallas County. Additionally, parts of the city extend into adjacent Collin, Denton, Kaufman, and Rockwall counties. Classified as one of the biggest cities in Texas.</p></li>
<li><p>Due to its size, history, and variety of arts and culture centers, many popular attractions exist in and around Dallas. For sports fans, Dallas is home to the world-famous Dallas Cowboys professional football team. For history and architecture buffs, the Fair Park National Historic Landmark District is the largest example of Art Deco art and architecture in the world (<a href="https://www.worldatlas.com/cities/dallas-texas.html">WorldAtlas</a>).</p></li>
<li><p>This contributes to making it a prime spot for urban migration and consequent increase in urban expansion. With a 2020 census population of 1,304,379, Dallas is considered one of the biggest cities in Texas.</p></li>
</ul>
</section>
</section>
<section id="aim-objectives" class="level1">
<h1>Aim &amp; Objectives</h1>
<p>The aim of this project is to monitor and evaluate urban sprawl in Dallas, Texas and project building development in the future using a combination of multisource data from Remote Sensing technology and GIS.&nbsp; The objectives are listed below;</p>
<ul>
<li><p>To process the remote sensing data [NIAP Aerial Images] using appropriate software.</p></li>
<li><p>Analyze Land Use change and/or urbanization between 2010 and 2020 by overlaying the classified mosaicked photos obtained from these years.</p></li>
<li><p>To assess the trends in the physical expansion of the cities and build a prediction model.</p></li>
</ul>
</section>
<section id="methodology" class="level1">
<h1>Methodology</h1>
<section id="data" class="level3">
<h3 class="anchored" data-anchor-id="data">Data</h3>
<p>The data used for this project has been collected from primary and secondary data sources (Table 1). The data from the primary sources include The National Agriculture Imagery Program (NAIP) aerial images for the years 2010 and 2020. 144 images were collected in total to cover the whole of Dallas county, Tx, for the two indicated years.</p>
<p>The data collected from secondary sources include the demographic data (primary census abstracts for the years 2010 and 2020) from the United States Census Bureau. Shapefile datasets (Texas and Dallas city boundaries) were obtained from the Texas Department of Transportation’s open data portal.</p>
<table class="table">
<caption>Table 1: Data Types Used</caption>
<colgroup>
<col style="width: 18%">
<col style="width: 24%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Data</th>
<th>Scale/Resolution</th>
<th>No of Photos</th>
<th>Years</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Item 1</td>
<td>NAIP Aerial Imagery</td>
<td>1.0m</td>
<td>72</td>
<td>2010</td>
</tr>
<tr class="even">
<td>Item 2</td>
<td>NAIP Aerial Imagery</td>
<td>0.6m</td>
<td>72</td>
<td>2020</td>
</tr>
<tr class="odd">
<td>Item 3</td>
<td>Census Data</td>
<td>Decadal</td>
<td></td>
<td>2010 &amp; 2020</td>
</tr>
<tr class="even">
<td>Item 4</td>
<td>Texas/Dallas Shapefiles</td>
<td>Foot</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Table 2: NAIP Bands</caption>
<thead>
<tr class="header">
<th>Band</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Band 1</td>
<td>Red</td>
</tr>
<tr class="even">
<td>Band 2</td>
<td>Green</td>
</tr>
<tr class="odd">
<td>Band 3</td>
<td>Blue</td>
</tr>
<tr class="even">
<td>Band 4</td>
<td>NIR</td>
</tr>
</tbody>
</table>
</section>
<section id="methods" class="level3">
<h3 class="anchored" data-anchor-id="methods">Methods</h3>
<ul>
<li><p>Detailed examination of aerial imagery to identify anomalies like cloud cover, shadows, smear, and color imbalance.</p></li>
<li><p>Land use classification involves identifying distinct classes: vegetation, water bodies, ‘impervious 1,’ and ‘impervious 2’.</p></li>
<li><p>Mosaicking process integrates aerial photos into a seamless orthorectified image in ECW format.</p></li>
<li><p>Radiometric corrections applied to adjust pixel values for sensor-specific characteristics and atmospheric effects.</p></li>
<li><p>Color imbalances in the dataset mitigated during the mosaic process using ‘image dodging’ for enhanced composite orthorectified image. (Fig 3).</p></li>
<li><p>Resampling performed on 2020 aerial images from higher resolution (0.6m) to lower resolution (1m) to ensure consistent spatial resolution for both years, facilitating map density calculations per cell.</p></li>
<li><p>Unsupervised classification performed on mosaics for an exploratory analysis to identify natural groupings or patterns. Supervised classification is then performed in order to group the imagery into four land cover classes; Impervious Land 1 (urban settlements), Impervious Land 2 (fallow land, rocky hills, etc), water and vegetation.</p></li>
<li><p>Change vector analysis is carried out using ERDAS Imagine to compare the images over time. This is done by comparing pixel values in different images to determine the size and direction of change. Classified images are then extracted in ESRI ArcGIS Suite for further analysis.</p></li>
</ul>
</section>
</section>
<section id="resultsdiscussion" class="level1">
<h1>Results/Discussion</h1>
<section id="change-detection-interpretations" class="level3">
<h3 class="anchored" data-anchor-id="change-detection-interpretations">Change Detection Interpretations</h3>
<p>In the city, there were changes from natural areas to built-up spaces like roads and buildings. This happens as cities grow and need more space for homes and businesses. Sometimes, near water bodies, there were changes from water to plants or built-up areas. This might be because of human activities like filling with sand or natural changes like erosion.</p>
<p>There were changes from paved areas to water, which can happen due to natural forces like waves and weather, or man-made structures like pools. There were also changes from non-urban land to plants, possibly from human efforts like planting, farming, or natural processes like seeds spreading and climate patterns.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot 2024-07-06 142422.png" class="img-fluid figure-img" width="703"></p>
<figcaption>Image showing a snippet of change map of Dallas City.</figcaption>
</figure>
</div>
</section>
<section id="population-and-urban-density" class="level3">
<h3 class="anchored" data-anchor-id="population-and-urban-density">Population and Urban Density</h3>
<p>Over the decade from 2010 to 2020 in Dallas, there was a notable expansion in impervious areas (built-up) from 272.3 million square meters to 341.8 million square meters. The comparison highlights that land development outpaced population growth. While the population increased by approximately 8.9%, the developed land expanded by about 25.51%, This indicates a rapid urbanization pace.</p>
<p>The projected population for 2030 suggests a slight decline of 0.9%. This decrease may be attributed to potential errors in the data model or could be reflective of the fluctuating nature of population trends, as observed in historical data.</p>
<p>The multivariate regression validation yielded inconclusive results with ‘no value.’ Coefficients for Intercept and alpha_den (αD) are provided, but those for Pagr and PD are undefined due to potential issues like high collinearity or insufficient variability. With data available only for 2010 and 2020, further investigation into multicollinearity and potential model reconsideration is needed (Please refer to full report available below).</p>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>Using classified temporal aerial photos for change detection is a powerful approach for understanding landscape dynamics, such as urban sprawl, over time. It provides valuable insights for various applications, from environmental monitoring to urban planning and natural resource management.</p>
<p>We can see that population and subsequent increase in overall economic activity&nbsp; contributes to urban sprawl. This pushes the narrative on balancing growth &amp; development with sustainable, strategic planning and policies that will promote resource efficiency and inclusive practices. Sustainable urbanization is the future.</p>
<p>It should be noted that the results reported in this study should be interpreted as preliminary. It is important to note that our analysis assumed a quadratic distribution for the data. However, it is possible that this distribution may not be the most suitable fit for the observed patterns. Further investigation is needed to assess the appropriateness of the chosen distribution and explore alternative models. Future research should involve a rigorous examination of various distributional forms to identify the most accurate representation.</p>
<section id="full-report-on-mapping-urban-sprawl-analyzing-the-dynamics-of-land-useland-cover-change-and-its-impact-on-urban-growth-patterns." class="level2">
<h2 class="anchored" data-anchor-id="full-report-on-mapping-urban-sprawl-analyzing-the-dynamics-of-land-useland-cover-change-and-its-impact-on-urban-growth-patterns.">Full Report on <strong>“Mapping Urban Sprawl: Analyzing the Dynamics of Land Use/Land Cover Change and its Impact on Urban Growth Patterns.”</strong></h2>
<p>The downloadable version of PDF report is available below.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><embed src="images/Victoria Ebeh_Final Project Report-01.pptx" class="img-fluid"></p>
<figcaption>Victoria Ebeh - Final Report</figcaption>
</figure>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>